<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Namespaces on Monstache</title>
    <link>https://rwynn.github.io/monstache-site/namespaces/index.xml</link>
    <description>Recent content in Namespaces on Monstache</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>Released under the MIT license</copyright>
    <atom:link href="https://rwynn.github.io/monstache-site/namespaces/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>Namespaces</title>
      <link>https://rwynn.github.io/monstache-site/namespaces/</link>
      <pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate>
      
      <guid>https://rwynn.github.io/monstache-site/namespaces/</guid>
      <description>&lt;p&gt;When a document is inserted, updated, or deleted in mongodb a document is appended to the oplog representing the event.  This document has a field &lt;code&gt;ns&lt;/code&gt; which is the namespace.  For inserts, updates, and deletes the namespace is the database name and collection name of the document changed joined by a dot. E.g. for &lt;code&gt;use test; db.foo.insert({hello: &amp;quot;world&amp;quot;});&lt;/code&gt; the namespace for the event in the oplog would be &lt;code&gt;test.foo&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;In addition to inserts, updates, and deletes monstache also supports database and collection drops.  When a database or collection is dropped in mongodb an event is appended to the oplog.  Like the other types of changes this event has a field &lt;code&gt;ns&lt;/code&gt; representing the namespace.  However, for drops the namespace is the database name and the string &lt;code&gt;$cmd&lt;/code&gt; joined by a dot.  E.g. for &lt;code&gt;use test; db.foo.drop()&lt;/code&gt; the namespace for the event in the oplog would be &lt;code&gt;test.$cmd&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;When configuring namespaces in monstache you will need to account for both cases.  Specifically, be careful if you have configured &lt;code&gt;dropped-databases|dropped-collections=true&lt;/code&gt; AND you also have a &lt;code&gt;namespace-regex&lt;/code&gt; set.  If your namespace regex does not take into account the &lt;code&gt;db.$cmd&lt;/code&gt; namespace the event may be filtered and the elasticsearch index not deleted on a drop.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>