<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Transform and Filter - Monstache</title>
    <meta name="generator" content="Hugo 0.32-DEV" />

    
    <meta name="description" content="a go daemon which syncs mongodb to elasticsearch in neal realtime">
    
    <link rel="canonical" href="https://rwynn.github.io/monstache-site/transform-filter/">
    
    <meta name="author" content="Ryan Wynn">
    

    <meta property="og:url" content="https://rwynn.github.io/monstache-site/transform-filter/">
    <meta property="og:title" content="Monstache">
    <meta property="og:image" content="https://rwynn.github.io/images/monstache.png">
    <meta name="apple-mobile-web-app-title" content="Monstache">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://rwynn.github.io/monstache-site/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://rwynn.github.io/monstache-site/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://rwynn.github.io/monstache-site/fonts/icon.eot');
        src: url('https://rwynn.github.io/monstache-site/fonts/icon.eot')
               format('embedded-opentype'),
             url('https://rwynn.github.io/monstache-site/fonts/icon.woff')
               format('woff'),
             url('https://rwynn.github.io/monstache-site/fonts/icon.ttf')
               format('truetype'),
             url('https://rwynn.github.io/monstache-site/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://rwynn.github.io/monstache-site/stylesheets/application.css">
    <link rel="stylesheet" href="https://rwynn.github.io/monstache-site/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://rwynn.github.io/monstache-site/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://rwynn.github.io/monstache-site/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Work%20Sans:400,700|Source&#43;Code&#43;Pro">
    <style>
      body, input {
        font-family: 'Work Sans', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Source Code Pro', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://rwynn.github.io/monstache-site/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-indigo palette-accent-red">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Transform and Filter
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/rwynn" title="@rwynn on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/rwynn/monstache" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://rwynn.github.io/monstache-site/images/monstache.png">
        </div>
      
      <div class="name">
        <strong>Monstache <span class="version">3.4.2</span></strong>
        
          <br>
          rwynn/monstache
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/rwynn/monstache/releases" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/rwynn/monstache/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Monstache" href="https://rwynn.github.io/monstache-site/">
	
	Monstache
</a>



  
</li>



<li>
  
    



<a  title="Getting started" href="https://rwynn.github.io/monstache-site/getting-started/">
	
	Getting started
</a>



  
</li>



<li>
  
    



<a  title="Options" href="https://rwynn.github.io/monstache-site/options/">
	
	Options
</a>



  
</li>



<li>
  
    



<a  title="Namespaces" href="https://rwynn.github.io/monstache-site/namespaces/">
	
	Namespaces
</a>



  
</li>



<li>
  
    



<a  title="Index Mapping" href="https://rwynn.github.io/monstache-site/index-mapping/">
	
	Index Mapping
</a>



  
</li>



<li>
  
    



<a  title="Transform and Filter" href="https://rwynn.github.io/monstache-site/transform-filter/">
	
	Transform and Filter
</a>



  
</li>



<li>
  
    



<a  title="Indexing GridFS Files" href="https://rwynn.github.io/monstache-site/gridfs/">
	
	Indexing GridFS Files
</a>



  
</li>



<li>
  
    



<a  title="Routing" href="https://rwynn.github.io/monstache-site/index-meta/">
	
	Routing
</a>



  
</li>



<li>
  
    



<a  title="Workers" href="https://rwynn.github.io/monstache-site/workers/">
	
	Workers
</a>



  
</li>



<li>
  
    



<a  title="High Availability" href="https://rwynn.github.io/monstache-site/high-availability/">
	
	High Availability
</a>



  
</li>



<li>
  
    



<a  title="Merge Patches" href="https://rwynn.github.io/monstache-site/merge-patches/">
	
	Merge Patches
</a>



  
</li>



<li>
  
    



<a  title="Systemd" href="https://rwynn.github.io/monstache-site/system-d/">
	
	Systemd
</a>



  
</li>



<li>
  
    



<a  title="HTTP Server" href="https://rwynn.github.io/monstache-site/http-server/">
	
	HTTP Server
</a>



  
</li>



<li>
  
    



<a  title="License" href="https://rwynn.github.io/monstache-site/license/">
	
	License
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/rwynn" target="_blank" title="@rwynn on GitHub">
              @rwynn on GitHub
            </a>
          </li>
          

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Transform and Filter </h1>

			

<p>monstache supports embedding user defined middleware between MongoDB and Elasticsearch.  middleware is able to transform documents,
drop documents, or define indexing metadata.  middleware may be written in either Javascript or in Golang as a plugin.  Golang plugins
require Go version 1.8 or greater on Linux. currently, you are able to use Javascript or Golang but not both (this may change in the future).</p>

<h2 id="golang">Golang</h2>

<p>monstache supports Golang 1.8 plugins on Linux.  To implement a plugin for monstache you simply need to implement a specific function signature,
use the go command to build a .so file for your plugin, and finally pass the path to your plugin .so file when running monstache.</p>

<p>plugins must import the package <code>github.com/rwynn/monstache/monstachemap</code></p>

<p>plugins must implement a function named <code>Map</code> with the following signature</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#069;font-weight:bold">func</span> Map(input <span style="color:#555">*</span>monstachemap.MapperPluginInput) (output <span style="color:#555">*</span>monstachemap.MapperPluginOutput, err <span style="color:#078;font-weight:bold">error</span>)</code></pre></div>
<p>plugins can be compiled using</p>

<pre><code>go build -buildmode=plugin -o myplugin.so myplugin.go
</code></pre>

<p>to enable the plugin, start with <code>monstache -mapper-plugin-path /path/to/myplugin.so</code></p>

<p>the following example plugin simply converts top level string values to uppercase</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#069;font-weight:bold">package</span> main
<span style="color:#069;font-weight:bold">import</span> (
	<span style="color:#c30">&#34;github.com/rwynn/monstache/monstachemap&#34;</span>
	<span style="color:#c30">&#34;strings&#34;</span>
)
<span style="color:#09f;font-style:italic">// a plugin to convert document values to uppercase
</span><span style="color:#09f;font-style:italic"></span><span style="color:#069;font-weight:bold">func</span> Map(input <span style="color:#555">*</span>monstachemap.MapperPluginInput) (output <span style="color:#555">*</span>monstachemap.MapperPluginOutput, err <span style="color:#078;font-weight:bold">error</span>) {
	doc <span style="color:#555">:=</span> input.Document
	<span style="color:#069;font-weight:bold">for</span> k, v <span style="color:#555">:=</span> <span style="color:#069;font-weight:bold">range</span> doc {
		<span style="color:#069;font-weight:bold">switch</span> v.(<span style="color:#069;font-weight:bold">type</span>) {
		<span style="color:#069;font-weight:bold">case</span> <span style="color:#078;font-weight:bold">string</span>:
			doc[k] = strings.ToUpper(v.(<span style="color:#078;font-weight:bold">string</span>))
		}
	}
	output = <span style="color:#555">&amp;</span>monstachemap.MapperPluginOutput{Document: doc}
	<span style="color:#069;font-weight:bold">return</span>
}</code></pre></div>
<p>the input parameter will contain information about the document&rsquo;s origin database and collection.
to drop the document (direct monstache not to index it) set <code>output.Drop = true</code>.
to simply pass the original document through to Elasticsearch, set <code>output.Passthrough = true</code></p>

<p><code>output.Index</code>, <code>output.Type</code>, <code>output.Parent</code> and <code>output.Routing</code> allow you to set the indexing metadata for each individual document.</p>

<p>if would like to embed other MongoDB documents (possibly from a different collection) within the current document
before indexing, you can access the <code>*mgo.Session</code> pointer as <code>input.Session</code>.  With the mgo session you can use the
<a href="https://godoc.org/gopkg.in/mgo.v2">mgo API</a> to find documents in MongoDB and embed them in the Document set
on output.</p>

<h2 id="javascript">Javascript</h2>

<h3 id="transformation">Transformation</h3>

<p>monstache uses the amazing <a href="https://github.com/robertkrimen/otto">otto</a> library to provide transformation at the document field
level in Javascript.  You can associate one javascript mapping function per mongodb collection.  These javascript functions are
added to your TOML config file, for example:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml">[[script]]
namespace = <span style="color:#c30">&#34;mydb.mycollection&#34;</span>
script = <span style="color:#c30">&#34;&#34;&#34;
</span><span style="color:#c30">var counter = 1;
</span><span style="color:#c30">module.exports = function(doc) {
</span><span style="color:#c30">	doc.foo += &#34;</span>test<span style="color:#c30">&#34; + counter;
</span><span style="color:#c30">	counter++;
</span><span style="color:#c30">	return _.omit(doc, &#34;</span>password<span style="color:#c30">&#34;, &#34;</span>secret<span style="color:#c30">&#34;);
</span><span style="color:#c30">}
</span><span style="color:#c30">&#34;&#34;&#34;</span>

[[script]]
namespace = <span style="color:#c30">&#34;anotherdb.anothercollection&#34;</span>
script = <span style="color:#c30">&#34;&#34;&#34;
</span><span style="color:#c30">var counter = 1;
</span><span style="color:#c30">module.exports = function(doc) {
</span><span style="color:#c30">	doc.foo += &#34;</span>test2<span style="color:#c30">&#34; + counter;
</span><span style="color:#c30">	counter++;
</span><span style="color:#c30">	return doc;
</span><span style="color:#c30">}
</span><span style="color:#c30">&#34;&#34;&#34;</span></code></pre></div>
<p>The example TOML above configures 2 scripts. The first is applied to <code>mycollection</code> in <code>mydb</code> while the second is applied
to <code>anothercollection</code> in <code>anotherdb</code>.</p>

<p>You will notice that the multi-line string feature of TOML is used to assign a javascript snippet to the variable named
<code>script</code>.  The javascript assigned to script must assign a function to the exports property of the <code>module</code> object.  This
function will be passed the document from mongodb just before it is indexed in elasticsearch.  Inside the function you can
manipulate the document to drop fields, add fields, or augment the existing fields.</p>

<p>The <code>this</code> reference in the mapping function is assigned to the document from mongodb.</p>

<p>When the return value from the mapping function is an <code>object</code> then that mapped object is what actually gets indexed in elasticsearch.
For these purposes an object is a javascript non-primitive, excluding <code>Function</code>, <code>Array</code>, <code>String</code>, <code>Number</code>, <code>Boolean</code>, <code>Date</code>, <code>Error</code> and <code>RegExp</code>.</p>

<h3 id="filtering">Filtering</h3>

<p>If the return value from the mapping function is not an <code>object</code> per the definition above then the result is converted into a <code>boolean</code>
and if the boolean value is <code>false</code> then that indicates to monstache that you would not like to index the document. If the boolean value is <code>true</code> then
the original document from mongodb gets indexed in elasticsearch.</p>

<p>This allows you to return false or null if you have implemented soft deletes in mongodb.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml">[[script]]
namespace = <span style="color:#c30">&#34;db.collection&#34;</span>
script = <span style="color:#c30">&#34;&#34;&#34;
</span><span style="color:#c30">module.exports = function(doc) {
</span><span style="color:#c30">	if (!!doc.deletedAt) {
</span><span style="color:#c30">		return false;
</span><span style="color:#c30">	}
</span><span style="color:#c30">	return true;
</span><span style="color:#c30">}
</span><span style="color:#c30">&#34;&#34;&#34;</span></code></pre></div>
<p>In the above example monstache will index any document except the ones with a <code>deletedAt</code> property.  If the document is first
inserted without a <code>deletedAt</code> property, but later updated to include the <code>deletedAt</code> property then monstache will remove the
previously indexed document from the elasticsearch index.</p>

<p>Note you could also return <code>doc</code> above instead of returning <code>true</code> and get the same result, however, it&rsquo;s a slight performance gain
to simply return <code>true</code> when not changing the document because you are not copying data in that case.</p>

<p>You may have noticed that in the first example above the exported mapping function closes over a var named <code>counter</code>.  You can
use closures to maintain state between invocations of your mapping function.</p>

<p>Finally, since Otto makes it so easy, the venerable <a href="http://underscorejs.org/">Underscore</a> library is included for you at
no extra charge.  Feel free to abuse the power of the <code>_</code>.</p>

<h3 id="embedding-documents">Embedding Documents</h3>

<p>In your javascript function you have access to the following global functions to retreive documents from MongoDB for
embedding in the current document before indexing.  Using this approach you can pull in related data.</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#069;font-weight:bold">function</span> findId(documentId, [options]) {
    <span style="color:#09f;font-style:italic">// convenience method for findOne({_id: documentId})
</span><span style="color:#09f;font-style:italic"></span>    <span style="color:#09f;font-style:italic">// returns 1 document or null
</span><span style="color:#09f;font-style:italic"></span>}

<span style="color:#069;font-weight:bold">function</span> findOne(query, [options]) {
    <span style="color:#09f;font-style:italic">// returns 1 document or null
</span><span style="color:#09f;font-style:italic"></span>}

<span style="color:#069;font-weight:bold">function</span> find(query, [options]) {
    <span style="color:#09f;font-style:italic">// returns an array of documents or null
</span><span style="color:#09f;font-style:italic"></span>}</code></pre></div>
<p>Each function takes a <code>query</code> object parameter and an optional <code>options</code> object parameter.</p>

<p>The options object takes the following keys and values:</p>
<div class="highlight"><pre style="background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#069;font-weight:bold">var</span> options <span style="color:#555">=</span> {
    database<span style="color:#555">:</span> <span style="color:#c30">&#34;test&#34;</span>,
    collection<span style="color:#555">:</span> <span style="color:#c30">&#34;test&#34;</span>,
    <span style="color:#09f;font-style:italic">// to omit _id set the _id key to 0 in select
</span><span style="color:#09f;font-style:italic"></span>    select<span style="color:#555">:</span> {
        age<span style="color:#555">:</span> <span style="color:#f60">1</span>
    },
    <span style="color:#09f;font-style:italic">// only applicable to find...
</span><span style="color:#09f;font-style:italic"></span>    sort<span style="color:#555">:</span> [<span style="color:#c30">&#34;name&#34;</span>],
    limit<span style="color:#555">:</span> <span style="color:#f60">2</span>
}</code></pre></div>
<p>If the database or collection keys are omitted from the options object, the values for database and/or
collection are set to the database and collection of the document being processed.</p>

<p>Here are some examples:</p>

<p>This example sorts the documents in the same collection as the document being processed by name and returns
the first 2 documents projecting only the age field.  The result is set on the current document before being
indexed.</p>

<pre><code>[[script]]
namespace = &quot;test.test&quot;
script = &quot;&quot;&quot;
module.exports = function(doc) {
    doc.twoAgesSortedByName = find({}, {
            sort: [&quot;name&quot;],
            limit: 2,
            select: {
              age: 1
            }
    });
    return doc;
}
&quot;&quot;&quot;
</code></pre>

<p>This example grabs a reference id from a document and replaces it with the corresponding document with that id.</p>

<pre><code>[[script]]
namespace = &quot;test.posts&quot;
script = &quot;&quot;&quot;
module.exports = function(post) {
    if (post.author) { // author is a an object id reference
        post.author = findId(post.author, {
          database: &quot;test&quot;,
          collection: &quot;users&quot;
        });
    }
    return post;
}
&quot;&quot;&quot;
</code></pre>

<h3 id="indexing-metadata">Indexing Metadata</h3>

<p>You can override the indexing metadata for an individual document by setting a special field named
<code>_meta_monstache</code> on the document you return from your Javascript function.</p>

<p>Assume there is a collection in MongoDB named <code>company</code> in the <code>test</code> database.
The documents in this collection look like either</p>

<pre><code>{ &quot;_id&quot;: &quot;london&quot;, &quot;type&quot;: &quot;branch&quot;, &quot;name&quot;: &quot;London Westminster&quot;, &quot;city&quot;: &quot;London&quot;, &quot;country&quot;: &quot;UK&quot; }
</code></pre>

<p>or</p>

<pre><code>{ &quot;_id&quot;: &quot;alice&quot;, &quot;type&quot;: &quot;employee&quot;, &quot;name&quot;: &quot;Alice Smith&quot;, &quot;branch&quot;: &quot;london&quot; }
</code></pre>

<p>Given the above the following snippet sets up a parent-child relationship in Elasticsearch based on the
incoming documents from MongoDB.</p>

<pre><code>[[script]]
namespace = &quot;test.company&quot;
routing = true
script = &quot;&quot;&quot;
module.exports = function(doc) {
    var meta = { type: doc.type, index: 'company' };
    if (doc.type === &quot;employee&quot;) {
        meta.parent = doc.branch;
    }
    doc._meta_monstache = meta;
    return _.omit(doc, &quot;branch&quot;, &quot;type&quot;);
}
&quot;&quot;&quot;
</code></pre>

<p>The snippet above will route these documents to the <code>company</code> index in Elasticsearch instead of the
default of <code>test.company</code>.  Also, instead of using <code>company</code> as the Elasticsearch type, the type
attribute from the document will be used as the Elasticsearch type.  Finally, if the type is
employee then the document will be indexed as a child of the branch the person belongs to.</p>

<p>We can throw away the type and branch information by deleting it from the document before returning
since the type information will be stored in Elasticsearch under <code>_type</code> and the branch information
will be stored under <code>_parent</code>.</p>

<p>The example is based on the Elasticsearch docs for <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/parent-child.html">parent-child</a></p>

<hr />


			<aside class="copyright" role="note">
				
				&copy; 2018 Released under the MIT license &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://rwynn.github.io/monstache-site/index-mapping/" title="Index Mapping">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Index Mapping
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://rwynn.github.io/monstache-site/gridfs/" title="Indexing GridFS Files">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Indexing GridFS Files
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/rwynn.github.io\/monstache-site';
      var repo_id  = 'rwynn\/monstache';
    
    </script>

    <script src="https://rwynn.github.io/monstache-site/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

